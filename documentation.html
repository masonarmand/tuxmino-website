<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tuxmino - Creating a GameMode</title>
  <meta name="description" content="Free open source, moddable falling block
  puzzle game written in C.">

  <meta name="keywords" content="tuxmino, free, action puzzle, puzzle, open
  source, github, scarbyte, grand master, tetris">

  <link href="style.css" rel="stylesheet" type="text/css" media="all">

  <link rel="stylesheet" href="/highlight/styles/base16/dracula.min.css">
  <script src="/highlight/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body>
  <main>
    <section id="title">
      <header>
        <img src="/img/logo.png" alt="Tuxmino Logo">
        <h1>Tuxmino</h1>
      </header>
      Highly moddable free open source falling block puzzle game. Written in C.
    </section>
    <nav>
      <ul>
        <li><a href="/">Home</a>
        <li><a href="https://github.com/scarbyte/tuxmino" target="_blank">Source Code</a></li>
        <li><a href="https://github.com/Scarbyte/tuxmino/releases" target="_blank">Download</a></li>
        <li><a href="/contributing.html">Contributing</a></li>
        <li><a href="/tutorial.html">GameMode tutorial</a></li>
        <li><a href="/documentation.html">GameMode Documentation</a></li>
      </ul>
    </nav>

    <section class="content">
      <header>
        <h2>Functions</h2>
      </header>
      <h3>C Functions (Called by Lua)</h3>
      <nav>
        <ul>
          <li><a href="#initGameMode">initGameMode</a></li>
          <li><a href="#setBackground">setBackground</a></li>
          <li><a href="#initBackgrounds">initBackgrounds</a></li>
          <li><a href="#initBgIdx">initBgIdx</a></li>
          <li><a href="#printc">printc</a></li>
          <li><a href="#setDAS">setDAS</a></li>
          <li><a href="#setARR">setARR</a></li>
          <li><a href="#setARE">setARE</a></li>
          <li><a href="#setLineARE">setLineARE</a></li>
          <li><a href="#setLockDelay">setLockDelay</a></li>
          <li><a href="#setClearSpeed">setClearSpeed</a></li>
          <li><a href="#setGravity">setGravity</a></li>
          <li><a href="#setPreview">setPreview</a></li>
          <li><a href="#setBagRetry">setBagRetry</a></li>
          <li><a href="#setGradeType">setGradeType</a></li>
          <li><a href="#setGrade">setGrade</a></li>
          <li><a href="#setNextScore">setNextScore</a></li>
          <li><a href="#setSevenBag">setSevenBag</a></li>
          <li><a href="#setHold">setHold</a></li>
          <li><a href="#setSonicDrop">setSonicDrop</a></li>
          <li><a href="#setExtraKicks">setExtraKicks</a></li>
          <li><a href="#set3D">set3D</a></li>
          <li><a href="#setDrawNextBg">setDrawNextBg</a></li>
          <li><a href="#setBig">setBig</a></li>
          <li><a href="#setInvis">setInvis</a></li>
          <li><a href="#setDisplayGrade">setDisplayGrade</a></li>
          <li><a href="#setGhost">setGhost</a></li>
          <li><a href="#setCreditRoll">setCreditRoll</a></li>
          <li><a href="#getCreditRoll">getCreditRoll</a></li>
          <li><a href="#setMaxLevel">setMaxLevel</a></li>
          <li><a href="#getMaxLevel">getMaxLevel</a></li>
          <li><a href="#setSectionLevel">setSectionLevel</a></li>
          <li><a href="#getSectionLevel">getSectionLevel</a></li>
          <li><a href="#setLevel">setLevel</a></li>
          <li><a href="#getLevel">getLevel</a></li>
          <li><a href="#setScore">setScore</a></li>
          <li><a href="#addScore">addScore</a></li>
          <li><a href="#getScore">getScore</a></li>
          <li><a href="#setSoftFrames">setSoftFrames</a></li>
          <li><a href="#getSoftFrames">getSoftFrames</a></li>
          <li><a href="#setPieceTint">setPieceTint</a></li>
          <li><a href="#setPlayfieldColor">setPlayfieldColor</a></li>
          <li><a href="#setClearOnCredits">setClearOnCredits</a></li>
          <li><a href="#setBoneBlocks">setBoneBlocks</a></li>
          <li><a href="#getElapsedTime">getElapsedTime</a></li>
        </ul>
      </nav>
      <h3>Lua Functions (Called from C)</h3>
<pre>
<code class="language-lua">function start()                                -- Called once on file load
function reset()                                -- Called every time game mode is reset or selected.
function update()                               -- Called every frame (only use this for specific use cases)
function advanceLevel(amount, lineCount)        -- Called every time a piece locks to the PlayField
-- amount = The amount to increment the level
-- lineCount = The amount of lines just scored
</code>
</pre>

      <section class="function" id="initGameMode">
        <header>
          <h4>InitGameMode</h4>
        </header>
        <p>Initialize the gamemode. This must be called first when creating a gamemode.</p>
        <ul>
          <li>name: string - Name of the game mode</li>
          <li>r: integer - Red value of playfield frame</li>
          <li>g: integer - Green value of playfield frame</li>
          <li>b: integer - Blue value of playfield frame</li>
        </ul>
        <pre><code>initGameMode(name, r, g, b)</code></pre>
      </section>

      <section class="function" id="initBackgrounds">
        <header>
          <h4>initBackgrounds</h4>
        </header>
        <p>Initialize the internal backgrounds array.</p>
        <ul>
          <li>amount: integer - Number of backgrounds</li>
        </ul>
        <pre><code>initBackgrounds(amount)</code></pre>
      </section>

      <section class="function" id="initBgIdx">
        <header>
          <h4>initBgIdx</h4>
        </header>
        <p>Load background for a specific index in the backgrounds array.</p>
        <ul>
          <li>index: integer - Index of the background in the array</li>
          <li>filename: string - Name of the background image file</li>
        </ul>
        <pre><code>initBgIdx(index, filename)</code></pre>
      </section>

      <section class="function" id="setBackground">
        <header>
          <h4>setBackground</h4>
        </header>
        <p>Set the current background.</p>
        <ul>
          <li>index: integer - Index of the background in the array</li>
        </ul>
        <pre><code>setBackground(index)</code></pre>
      </section>

      <section class="function" id="setPieceTint">
        <header>
          <h4>setPieceTint</h4>
        </header>
        <p>Set the color tint of the piece when it locks to the grid.</p>
        <ul>
          <li>r: integer - Red value</li>
          <li>g: integer - Green value</li>
          <li>b: integer - Blue value</li>
        </ul>
        <pre><code>setPieceTint(r, g, b)</code></pre>
      </section>

      <section class="function" id="setDAS">
        <header>
          <h4>setDAS</h4>
        </header>
        <p>Set the delayed auto shift.</p>
        <ul>
          <li>frames: integer - Number of pseudo frames</li>
        </ul>
        <pre><code>setDAS(frames)</code></pre>
      </section>

      <section class="function" id="setARR">
        <header>
          <h4>setARR</h4>
        </header>
        <p>Set the auto repeat rate.</p>
        <ul>
          <li>frames: integer - Number of pseudo frames</li>
        </ul>
        <pre><code>setARR(frames)</code></pre>
      </section>

      <section class="function" id="setARE">
        <header>
          <h4>setARE</h4>
        </header>
        <p>Set the appearance delay.</p>
        <ul>
          <li>frames: integer - Number of pseudo frames</li>
        </ul>
        <pre><code>setARE(frames)</code></pre>
      </section>

      <section class="function" id="setLineARE">
        <header>
          <h4>setLineARE</h4>
        </header>
        <p>Set the line appearance delay.</p>
        <ul>
          <li>frames: integer - Number of pseudo frames</li>
        </ul>
        <pre><code>setLineARE(frames)</code></pre>
      </section>

      <section class="function" id="setClearSpeed">
        <header>
          <h4>setClearSpeed</h4>
        </header>
        <p>Set the line clear speed.</p>
        <ul>
          <li>frames: integer - Number of pseudo frames</li>
        </ul>
        <pre><code>setClearSpeed(frames)</code></pre>
      </section>

      <section class="function" id="setLockDelay">
        <header>
          <h4>setLockDelay</h4>
        </header>
        <p>Set the lock delay.</p>
        <ul>
          <li>frames: integer - Number of pseudo frames</li>
        </ul>
        <pre><code>setLockDelay(frames)</code></pre>
      </section>

      <section class="function" id="setClearSpeed">
        <header>
          <h4>setClearSpeed</h4>
        </header>
        <p>Sets the speed of line clears in the game mode.</p>
        <ul>
          <li>speed: integer - The speed of line clears in frames.</li>
        </ul>
        <pre><code>setClearSpeed(speed)</code></pre>
      </section>

      <section class="function" id="setGravity">
        <header>
          <h4>setGravity</h4>
        </header>
        <p>Sets the gravity level for the game mode.</p>
        <ul>
          <li>gravityLevel: integer - The gravity level to set.</li>
        </ul>
        <pre><code>setGravity(gravityLevel)</code></pre>
      </section>

      <section class="function" id="setPreview">
        <header>
          <h4>setPreview</h4>
        </header>
        <p>Sets the number of piece previews for the game mode.</p>
        <ul>
          <li>count: integer - The number of piece previews to display.</li>
        </ul>
        <pre><code>setPreview(count)</code></pre>
      </section>

      <section class="function" id="setBagRetry">
        <header>
          <h4>setBagRetry</h4>
        </header>
        <p>Sets the number of retries for bag generation in the game mode.</p>
        <ul>
          <li>retries: integer - The number of retries for bag generation.</li>
        </ul>
        <pre><code>setBagRetry(retries)</code></pre>
      </section>

      <section class="function" id="setGradeType">
        <header>
          <h4>setGradeType</h4>
        </header>
        <p>Sets the grade type for the game mode.</p>
        <ul>
          <li>type: integer - The grade type to set.</li>
        </ul>
        <pre><code>setGradeType(type)</code></pre>
      </section>

      <section class="function" id="setGrade">
        <header>
          <h4>setGrade</h4>
        </header>
        <p>Sets the grade for the game mode.</p>
        <ul>
          <li>grade: integer - The grade to set.</li>
        </ul>
        <pre><code>setGrade(grade)</code></pre>
      </section>

      <section class="function" id="setNextScore">
        <header>
          <h4>setNextScore</h4>
        </header>
        <p>Sets the next score for the game mode.</p>
        <ul>
          <li>score: integer - The next score to set.</li>
        </ul>
        <pre><code>setNextScore(score)</code></pre>
      </section>

      <section class="function" id="setClearOnCredits">
        <header>
          <h4>setClearOnCredits</h4>
        </header>
        <p>Sets whether the playfield should be cleared when credits are displayed in the game mode.</p>
        <ul>
          <li>clear: boolean - Whether to clear the playfield on credits.</li>
        </ul>
        <pre><code>setClearOnCredits(clear)</code></pre>
      </section>

      <section class="function" id="setSevenBag">
        <header>
          <h4>setSevenBag</h4>
        </header>
        <p>Sets whether the seven-bag randomizer should be used in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable the seven-bag randomizer.</li>
        </ul>
        <pre><code>setSevenBag(enabled)</code></pre>
      </section>

      <section class="function" id="setHold">
        <header>
          <h4>setHold</h4>
        </header>
        <p>Sets whether the hold feature should be enabled in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable the hold feature.</li>
        </ul>
        <pre><code>setHold(enabled)</code></pre>
      </section>

      <section class="function" id="setSonicDrop">
        <header>
          <h4>setSonicDrop</h4>
        </header>
        <p>Sets whether the sonic drop feature should be enabled in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable the sonic drop feature.</li>
        </ul>
        <pre><code>setSonicDrop(enabled)</code></pre>
      </section>

      <section class="function" id="setExtraKicks">
        <header>
          <h4>setExtraKicks</h4>
        </header>
        <p>Sets whether extra kicks should be enabled in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable extra kicks.</li>
        </ul>
        <pre><code>setExtraKicks(enabled)</code></pre>
      </section>

      <section class="function" id="set3D">
        <header>
          <h4>set3D</h4>
        </header>
        <p>Sets whether the 3D effect should be enabled in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable the 3D effect.</li>
        </ul>
        <pre><code>set3D(enabled)</code></pre>
      </section>

      <section class="function" id="setDrawNextBg">
        <header>
          <h4>setDrawNextBg</h4>
        </header>
        <p>Sets whether to draw the next piece background in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable drawing the next piece background.</li>
        </ul>
        <pre><code>setDrawNextBg(enabled)</code></pre>
      </section>

      <section class="function" id="setBig">
        <header>
          <h4>setBig</h4>
        </header>
        <p>Sets whether the big mode should be enabled in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable the big mode.</li>
        </ul>
        <pre><code>setBig(enabled)</code></pre>
      </section>

      <section class="function" id="setInvis">
        <header>
          <h4>setInvis</h4>
        </header>
        <p>Sets whether the invisible pieces mode should be enabled in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable invisible pieces.</li>
        </ul>
        <pre><code>setInvis(enabled)</code></pre>
      </section>

      <section class="function" id="setDisplayGrade">
        <header>
          <h4>setDisplayGrade</h4>
        </header>
        <p>Sets whether the grade should be displayed in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable displaying the grade.</li>
        </ul>
        <pre><code>setDisplayGrade(enabled)</code></pre>
      </section>

      <section class="function" id="setGhost">
        <header>
          <h4>setGhost</h4>
        </header>
        <p>Sets whether the ghost piece should be shown in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable showing the ghost piece.</li>
        </ul>
        <pre><code>setGhost(enabled)</code></pre>
      </section>

      <section class="function" id="setCreditRoll">
        <header>
          <h4>setCreditRoll</h4>
        </header>
        <p>Sets whether to perform a credit roll in the game mode.</p>
        <ul>
          <li>enabled: boolean - Whether to enable the credit roll.</li>
        </ul>
        <pre><code>setCreditRoll(enabled)</code></pre>
      </section>

      <section class="function" id="getCreditRoll">
        <header>
          <h4>getCreditRoll</h4>
        </header>
        <p>Gets the current credit roll state of the game mode.</p>
        <ul>
          <li>Returns: boolean - The current credit roll state.</li>
        </ul>
        <pre><code>getCreditRoll()</code></pre>
      </section>

      <section class="function" id="setMaxLevel">
        <header>
          <h4>setMaxLevel</h4>
        </header>
        <p>Sets the maximum level for the game mode.</p>
        <ul>
          <li>level: integer - The maximum level value.</li>
        </ul>
        <pre><code>setMaxLevel(level)</code></pre>
      </section>

      <section class="function" id="getMaxLevel">
        <header>
          <h4>getMaxLevel</h4>
        </header>
        <p>Gets the maximum level of the game mode.</p>
        <ul>
          <li>Returns: integer - The maximum level value.</li>
        </ul>
        <pre><code>getMaxLevel()</code></pre>
      </section>

      <section class="function" id="setSectionLevel">
        <header>
          <h4>setSectionLevel</h4>
        </header>
        <p>Sets the section level for the game mode.</p>
        <ul>
          <li>level: integer - The section level value.</li>
        </ul>
        <pre><code>setSectionLevel(level)</code></pre>
      </section>

      <section class="function" id="getSectionLevel">
        <header>
          <h4>getSectionLevel</h4>
        </header>
        <p>Gets the section level of the game mode.</p>
        <ul>
          <li>Returns: integer - The section level value.</li>
        </ul>
        <pre><code>getSectionLevel()</code></pre>
      </section>

      <section class="function" id="setLevel">
        <header>
          <h4>setLevel</h4>
        </header>
        <p>Sets the level for the game mode.</p>
        <ul>
          <li>level: integer - The level value.</li>
        </ul>
        <pre><code>setLevel(level)</code></pre>
      </section>

      <section class="function" id="getLevel">
        <header>
          <h4>getLevel</h4>
        </header>
        <p>Gets the level of the game mode.</p>
        <ul>
          <li>Returns: integer - The level value.</li>
        </ul>
        <pre><code>getLevel()</code></pre>
      </section>

      <section class="function" id="setScore">
        <header>
          <h4>setScore</h4>
        </header>
        <p>Sets the score for the game mode.</p>
        <ul>
          <li>score: integer - The score value.</li>
        </ul>
        <pre><code>setScore(score)</code></pre>
      </section>

      <section class="function" id="addScore">
        <header>
          <h4>addScore</h4>
        </header>
        <p>Adds a specified score to the current game mode score.</p>
        <ul>
          <li>score: integer - The score to add.</li>
        </ul>
        <pre><code>addScore(score)</code></pre>
      </section>

      <section class="function" id="getScore">
        <header>
          <h4>getScore</h4>
        </header>
        <p>Gets the current score of the game mode.</p>
        <ul>
          <li>Returns: integer - The current score value.</li>
        </ul>
        <pre><code>getScore()</code></pre>
      </section>

      <section class="function" id="setSoftFrames">
        <header>
          <h4>setSoftFrames</h4>
        </header>
        <p>Sets the soft drop frames for the game mode.</p>
        <ul>
          <li>frames: integer - The soft drop frames value.</li>
        </ul>
        <pre><code>setSoftFrames(frames)</code></pre>
      </section>

      <section class="function" id="getSoftFrames">
        <header>
          <h4>getSoftFrames</h4>
        </header>
        <p>Gets the soft drop frames of the game mode.</p>
        <ul>
          <li>Returns: integer - The soft drop frames value.</li>
        </ul>
        <pre><code>getSoftFrames()</code></pre>
      </section>

      <section class="function" id="setBoneBlocks">
        <header>
          <h4>setBoneBlocks</h4>
        </header>
        <p>Sets the use of bone blocks in the game mode.</p>
        <ul>
          <li>useBoneBlocks: boolean - Whether to use bone blocks or not.</li>
        </ul>
        <pre><code>setBoneBlocks(useBoneBlocks)</code></pre>
      </section>

      <section class="function" id="getElapsedTime">
        <header>
          <h4>getElapsedTime</h4>
        </header>
        <p>Gets the elapsed time of the game mode.</p>
        <ul>
          <li>Returns: number - The elapsed time in milliseconds.</li>
        </ul>
        <pre><code>getElapsedTime()</code></pre>
      </section>
    </section>
  </main>
</body>
</html>
